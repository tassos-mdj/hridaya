<!DOCTYPE html>
<html>
<head>
  <title>User Form</title>
</head>
<body>

  <h2>Submit your details</h2>

  <form id="userForm">
    <input type="hidden" id="itemId" name="itemId">

    <label>
      Name:
      <input type="text" id="name" required>
    </label>
    <br><br>

    <label>
      Email:
      <input type="email" id="email" required>
    </label>
    <br><br>

    <button type="submit">Submit</button>
  </form>

  <script>
    // Read ID from URL
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    document.getElementById("itemId").value = id;
  </script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
  emailjs.init("jfV0P76ODpjk51HEs");

  document.getElementById("userForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const templateParams = {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      item_id: document.getElementById("itemId").value
    };

    emailjs.send("service_rcmzhs9", "template_gxftvlh", templateParams)
      .then(() => {
        window.location.href = `formsuccess.html`;
      })
      .catch(error => {
        alert("Error sending email");
        console.error(error);
      });
  });
</script>


</body>
</html>
